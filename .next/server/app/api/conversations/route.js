"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/conversations/route";
exports.ids = ["app/api/conversations/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "playwright":
/*!*****************************!*\
  !*** external "playwright" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("playwright");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fconversations%2Froute&page=%2Fapi%2Fconversations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconversations%2Froute.ts&appDir=C%3A%5CpmkProject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CpmkProject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fconversations%2Froute&page=%2Fapi%2Fconversations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconversations%2Froute.ts&appDir=C%3A%5CpmkProject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CpmkProject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_pmkProject_src_app_api_conversations_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/conversations/route.ts */ \"(rsc)/./src/app/api/conversations/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/conversations/route\",\n        pathname: \"/api/conversations\",\n        filename: \"route\",\n        bundlePath: \"app/api/conversations/route\"\n    },\n    resolvedPagePath: \"C:\\\\pmkProject\\\\src\\\\app\\\\api\\\\conversations\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_pmkProject_src_app_api_conversations_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/conversations/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjb252ZXJzYXRpb25zJTJGcm91dGUmcGFnZT0lMkZhcGklMkZjb252ZXJzYXRpb25zJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY29udmVyc2F0aW9ucyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDcG1rUHJvamVjdCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q3Bta1Byb2plY3QmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDTTtBQUNuRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL3BrbS1wcm9qZWN0Lz82YzkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXHBta1Byb2plY3RcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcY29udmVyc2F0aW9uc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY29udmVyc2F0aW9ucy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NvbnZlcnNhdGlvbnNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NvbnZlcnNhdGlvbnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxwbWtQcm9qZWN0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGNvbnZlcnNhdGlvbnNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY29udmVyc2F0aW9ucy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fconversations%2Froute&page=%2Fapi%2Fconversations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconversations%2Froute.ts&appDir=C%3A%5CpmkProject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CpmkProject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/conversations/route.ts":
/*!********************************************!*\
  !*** ./src/app/api/conversations/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_utils_chatgpt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/utils/chatgpt */ \"(rsc)/./src/lib/utils/chatgpt.ts\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm/v4.js\");\n\n\n\n\n\nasync function POST(request) {\n    try {\n        console.log(\"=== Processing conversation request ===\");\n        const body = await request.json().catch((e)=>{\n            console.error(\"Failed to parse request body:\", e);\n            return null;\n        });\n        if (!body || !body.url) {\n            console.error(\"Missing URL in request body\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"ChatGPT 공유 URL이 필요합니다.\"\n            }, {\n                status: 400\n            });\n        }\n        const { url } = body;\n        console.log(`Processing URL: \"${url}\"`);\n        // URL 유효성 검사\n        if (!isValidChatGPTUrl(url)) {\n            console.error(\"Invalid URL format or domain\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"유효한 ChatGPT 공유 URL이 아닙니다.\"\n            }, {\n                status: 400\n            });\n        }\n        // ChatGPT 링크 파싱 (Playwright 기반)\n        console.log(\"=== Starting Playwright parsing ===\");\n        let result;\n        try {\n            result = await (0,_lib_utils_chatgpt__WEBPACK_IMPORTED_MODULE_1__.parseChatGPTLink)(url);\n            console.log(`Parsed conversation: \"${result.conversation.title}\" with ${result.conversation.messages.length} messages`);\n            console.log(`Raw HTML length: ${result.rawHtml.length} characters`);\n        } catch (error) {\n            console.error(\"Error parsing conversation:\", error);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: error instanceof Error ? error.message : \"대화 내용을 추출할 수 없습니다.\"\n            }, {\n                status: 422\n            });\n        }\n        const { conversation, rawText } = result;\n        // 메시지 유효성 검사\n        if (!conversation.messages || conversation.messages.length === 0) {\n            console.error(\"No messages found in conversation\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"대화 내용을 찾을 수 없습니다.\"\n            }, {\n                status: 404\n            });\n        }\n        // 각 메시지 내용 간략히 로깅\n        conversation.messages.forEach((msg, idx)=>{\n            console.log(`Message #${idx + 1} (${msg.role}): ${msg.content.substring(0, 30)}... (${msg.content.length} chars)`);\n        });\n        // Obsidian Vault 경로 확인\n        const vaultPath = process.env.OBSIDIAN_VAULT_PATH;\n        console.log(`Using Obsidian vault path: ${vaultPath}`);\n        if (!vaultPath) {\n            console.error(\"Obsidian Vault path is not configured\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Obsidian Vault 경로가 설정되지 않았습니다.\"\n            }, {\n                status: 500\n            });\n        }\n        try {\n            // 고유 ID 생성\n            const id = conversation.id || `${Date.now()}-${(0,uuid__WEBPACK_IMPORTED_MODULE_4__[\"default\"])().substring(0, 8)}`;\n            // 파일명 생성 (제목을 파일명으로 변환)\n            const fileName = conversation.title.toLowerCase().replace(/[^a-z0-9가-힣]/g, \"-\").replace(/-+/g, \"-\").replace(/^-|-$/g, \"\").substring(0, 100) // 길이 제한\n             + \".md\";\n            // 옵시디언 ChatGPT 폴더 경로\n            const obsidianFolder = path__WEBPACK_IMPORTED_MODULE_3__.join(vaultPath, \"ChatGPT\");\n            // 폴더 생성 (없는 경우)\n            await fs_promises__WEBPACK_IMPORTED_MODULE_2__.mkdir(obsidianFolder, {\n                recursive: true\n            });\n            // YAML 프론트매터 생성\n            const frontmatter = `---\ntitle: ${conversation.title}\ndate: ${new Date().toLocaleString(\"ko-KR\")}\nsource: ${url}\ntags: ${conversation.metadata?.model || \"ChatGPT\"}\n---\n\n`;\n            // 대화 내용을 마크다운으로 변환\n            let markdownContent = frontmatter;\n            // 대화 내용 추가\n            markdownContent += `# ${conversation.title}\\n\\n`;\n            // URL과 날짜 정보 추가\n            markdownContent += `> [원본 URL](${url})\\n\\n`;\n            markdownContent += `> 저장 시간: ${new Date().toLocaleString(\"ko-KR\")}\\n\\n`;\n            if (conversation.metadata?.model) {\n                markdownContent += `> 태그: ${conversation.metadata.model}\\n\\n`;\n            }\n            markdownContent += `---\\n\\n`;\n            // 사용자-어시스턴트 대화 내용을 마크다운으로 포맷팅 (JSON 스타일로 변경)\n            conversation.messages.forEach((message, index)=>{\n                const isUser = message.role === \"user\";\n                const messageHeader = isUser ? \"## \\uD83D\\uDC64 사용자\" : \"## \\uD83E\\uDD16 assistant\";\n                // JSON 형식처럼 역할과 내용을 구분하여 표시\n                markdownContent += `${messageHeader}\\n\\n${message.content}\\n\\n`;\n                // 마지막 메시지가 아니면 구분선 추가\n                if (index < conversation.messages.length - 1) {\n                    markdownContent += `---\\n\\n`;\n                }\n            });\n            // 옵시디언에 마크다운 파일 저장\n            const obsidianFilePath = path__WEBPACK_IMPORTED_MODULE_3__.join(obsidianFolder, fileName);\n            await fs_promises__WEBPACK_IMPORTED_MODULE_2__.writeFile(obsidianFilePath, markdownContent, \"utf-8\");\n            console.log(`Saved markdown content to: ${obsidianFilePath}`);\n            // 원본 텍스트 내용 저장 (HTML 대신)\n            const textFileName = fileName.replace(\".md\", \"-original.txt\");\n            const textFilePath = path__WEBPACK_IMPORTED_MODULE_3__.join(obsidianFolder, textFileName);\n            await fs_promises__WEBPACK_IMPORTED_MODULE_2__.writeFile(textFilePath, rawText, \"utf-8\");\n            console.log(`Saved original text content to: ${textFilePath}`);\n            // 로컬 JSON 파일로 저장 (대화 데이터만)\n            const conversationsDir = path__WEBPACK_IMPORTED_MODULE_3__.join(process.cwd(), \"conversations\");\n            // 폴더 생성 (없는 경우)\n            await fs_promises__WEBPACK_IMPORTED_MODULE_2__.mkdir(conversationsDir, {\n                recursive: true\n            });\n            // 대화 데이터 생성 (conversations 폴더에 저장되는 형식)\n            const conversationData = {\n                id,\n                title: conversation.title,\n                content: conversation.messages,\n                metadata: {\n                    date: new Date().toISOString(),\n                    model: conversation.metadata?.model || \"gpt-4\",\n                    tags: []\n                },\n                createdAt: new Date().toISOString(),\n                url\n            };\n            // JSON 파일로 저장\n            const jsonFilePath = path__WEBPACK_IMPORTED_MODULE_3__.join(conversationsDir, `${id}.json`);\n            await fs_promises__WEBPACK_IMPORTED_MODULE_2__.writeFile(jsonFilePath, JSON.stringify(conversationData, null, 2), \"utf-8\");\n            console.log(`Saved conversation data to: ${jsonFilePath}`);\n            // 성공 응답\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                data: {\n                    conversation: conversationData,\n                    obsidian: {\n                        path: vaultPath,\n                        fileName,\n                        filePath: obsidianFilePath,\n                        textPath: textFilePath,\n                        contentType: \"markdown-formatted\"\n                    },\n                    jsonBackup: jsonFilePath\n                }\n            });\n        } catch (saveError) {\n            console.error(\"Error saving data:\", saveError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: saveError instanceof Error ? saveError.message : \"데이터 저장 중 오류가 발생했습니다.\"\n            }, {\n                status: 500\n            });\n        }\n    } catch (error) {\n        console.error(\"Error processing conversation:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: error instanceof Error ? error.message : \"대화 처리 중 오류가 발생했습니다.\"\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * ChatGPT URL 유효성 검사\n */ function isValidChatGPTUrl(url) {\n    try {\n        const parsed = new URL(url);\n        // 도메인 체크\n        const validDomains = [\n            \"chat.openai.com\",\n            \"chatgpt.com\"\n        ];\n        if (!validDomains.some((domain)=>parsed.hostname.includes(domain))) {\n            return false;\n        }\n        // 경로 체크\n        return parsed.pathname.includes(\"/share/\") || parsed.pathname.includes(\"/c/\");\n    } catch (error) {\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9jb252ZXJzYXRpb25zL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTBDO0FBQ1k7QUFDckI7QUFDTDtBQUNPO0FBRTVCLGVBQWVNLEtBQUtDLE9BQWdCO0lBQ3pDLElBQUk7UUFDRkMsUUFBUUMsR0FBRyxDQUFDO1FBRVosTUFBTUMsT0FBTyxNQUFNSCxRQUFRSSxJQUFJLEdBQUdDLEtBQUssQ0FBQ0MsQ0FBQUE7WUFDdENMLFFBQVFNLEtBQUssQ0FBQyxpQ0FBaUNEO1lBQy9DLE9BQU87UUFDVDtRQUVBLElBQUksQ0FBQ0gsUUFBUSxDQUFDQSxLQUFLSyxHQUFHLEVBQUU7WUFDdEJQLFFBQVFNLEtBQUssQ0FBQztZQUNkLE9BQU9kLGtGQUFZQSxDQUFDVyxJQUFJLENBQ3RCO2dCQUFFSyxTQUFTO2dCQUFPRixPQUFPO1lBQXlCLEdBQ2xEO2dCQUFFRyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNLEVBQUVGLEdBQUcsRUFBRSxHQUFHTDtRQUNoQkYsUUFBUUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUVNLElBQUksQ0FBQyxDQUFDO1FBRXRDLGFBQWE7UUFDYixJQUFJLENBQUNHLGtCQUFrQkgsTUFBTTtZQUMzQlAsUUFBUU0sS0FBSyxDQUFDO1lBQ2QsT0FBT2Qsa0ZBQVlBLENBQUNXLElBQUksQ0FDdEI7Z0JBQUVLLFNBQVM7Z0JBQU9GLE9BQU87WUFBNEIsR0FDckQ7Z0JBQUVHLFFBQVE7WUFBSTtRQUVsQjtRQUVBLGdDQUFnQztRQUNoQ1QsUUFBUUMsR0FBRyxDQUFDO1FBQ1osSUFBSVU7UUFDSixJQUFJO1lBQ0ZBLFNBQVMsTUFBTWxCLG9FQUFnQkEsQ0FBQ2M7WUFDaENQLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHNCQUFzQixFQUFFVSxPQUFPQyxZQUFZLENBQUNDLEtBQUssQ0FBQyxPQUFPLEVBQUVGLE9BQU9DLFlBQVksQ0FBQ0UsUUFBUSxDQUFDQyxNQUFNLENBQUMsU0FBUyxDQUFDO1lBQ3RI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Q3RCO1lBQ0VLLFNBQVM7WUFDVEYsT0FBT0EsaUJBQWlCVyxRQUFRWCxNQUFNWSxPQUFPLEdBQUc7UUFDbEQsR0FDQTtZQUFFVCxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVBOztDQUVDLEdBQ0QsU0FBU0Msa0JBQWtCSCxHQUFXO0lBQ3BDLElBQUk7UUFDRixNQUFNOEQsU0FBUyxJQUFJQyxJQUFJL0Q7UUFFdkIsU0FBUztRQUNULE1BQU1nRSxlQUFlO1lBQUM7WUFBbUI7U0FBYztRQUN2RCxJQUFJLENBQUNBLGFBQWFDLElBQUksQ0FBQ0MsQ0FBQUEsU0FBVUosT0FBT0ssUUFBUSxDQUFDQyxRQUFRLENBQUNGLFVBQVU7WUFDbEUsT0FBTztRQUNUO1FBRUEsUUFBUTtRQUNSLE9BQU9KLE9BQU9PLFFBQVEsQ0FBQ0QsUUFBUSxDQUFDLGNBQWNOLE9BQU9PLFFBQVEsQ0FBQ0QsUUFBUSxDQUFDO0lBQ3pFLEVBQUUsT0FBT3JFLE9BQU87UUFDZCxPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BrbS1wcm9qZWN0Ly4vc3JjL2FwcC9hcGkvY29udmVyc2F0aW9ucy9yb3V0ZS50cz9mZjUyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgcGFyc2VDaGF0R1BUTGluayB9IGZyb20gJ0AvbGliL3V0aWxzL2NoYXRncHQnXG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcy9wcm9taXNlcydcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCdcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJz09PSBQcm9jZXNzaW5nIGNvbnZlcnNhdGlvbiByZXF1ZXN0ID09PScpO1xuICAgIFxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKS5jYXRjaChlID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSByZXF1ZXN0IGJvZHk6JywgZSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9KTtcbiAgICBcbiAgICBpZiAoIWJvZHkgfHwgIWJvZHkudXJsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdNaXNzaW5nIFVSTCBpbiByZXF1ZXN0IGJvZHknKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdDaGF0R1BUIOqzteycoCBVUkzsnbQg7ZWE7JqU7ZWp64uI64ukLicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB7IHVybCB9ID0gYm9keTtcbiAgICBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyBVUkw6IFwiJHt1cmx9XCJgKTtcblxuICAgIC8vIFVSTCDsnKDtmqjshLEg6rKA7IKsXG4gICAgaWYgKCFpc1ZhbGlkQ2hhdEdQVFVybCh1cmwpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIFVSTCBmb3JtYXQgb3IgZG9tYWluJyk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn7Jyg7Zqo7ZWcIENoYXRHUFQg6rO17JygIFVSTOydtCDslYTri5nri4jri6QuJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ2hhdEdQVCDrp4Htgawg7YyM7IuxIChQbGF5d3JpZ2h0IOq4sOuwmClcbiAgICBjb25zb2xlLmxvZygnPT09IFN0YXJ0aW5nIFBsYXl3cmlnaHQgcGFyc2luZyA9PT0nKTtcbiAgICBsZXQgcmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSBhd2FpdCBwYXJzZUNoYXRHUFRMaW5rKHVybCk7XG4gICAgICBjb25zb2xlLmxvZyhgUGFyc2VkIGNvbnZlcnNhdGlvbjogXCIke3Jlc3VsdC5jb252ZXJzYXRpb24udGl0bGV9XCIgd2l0aCAke3Jlc3VsdC5jb252ZXJzYXRpb24ubWVzc2FnZXMubGVuZ3RofSBtZXNzYWdlc2ApO1xuICAgICAgY29uc29sZS5sb2coYFJhdyBIVE1MIGxlbmd0aDogJHtyZXN1bHQucmF3SHRtbC5sZW5ndGh9IGNoYXJhY3RlcnNgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBjb252ZXJzYXRpb246JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IFxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAn64yA7ZmUIOuCtOyaqeydhCDstpTstpztlaAg7IiYIOyXhuyKteuLiOuLpC4nIFxuICAgICAgICB9LFxuICAgICAgICB7IHN0YXR1czogNDIyIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBjb252ZXJzYXRpb24sIHJhd1RleHQgfSA9IHJlc3VsdDtcblxuICAgIC8vIOuplOyLnOyngCDsnKDtmqjshLEg6rKA7IKsXG4gICAgaWYgKCFjb252ZXJzYXRpb24ubWVzc2FnZXMgfHwgY29udmVyc2F0aW9uLm1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5lcnJvcignTm8gbWVzc2FnZXMgZm91bmQgaW4gY29udmVyc2F0aW9uJyk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn64yA7ZmUIOuCtOyaqeydhCDssL7snYQg7IiYIOyXhuyKteuLiOuLpC4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgLy8g6rCBIOuplOyLnOyngCDrgrTsmqkg6rCE65617Z6IIOuhnOq5hVxuICAgIGNvbnZlcnNhdGlvbi5tZXNzYWdlcy5mb3JFYWNoKChtc2csIGlkeCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYE1lc3NhZ2UgIyR7aWR4KzF9ICgke21zZy5yb2xlfSk6ICR7bXNnLmNvbnRlbnQuc3Vic3RyaW5nKDAsIDMwKX0uLi4gKCR7bXNnLmNvbnRlbnQubGVuZ3RofSBjaGFycylgKTtcbiAgICB9KTtcblxuICAgIC8vIE9ic2lkaWFuIFZhdWx0IOqyveuhnCDtmZXsnbhcbiAgICBjb25zdCB2YXVsdFBhdGggPSBwcm9jZXNzLmVudi5PQlNJRElBTl9WQVVMVF9QQVRIO1xuICAgIGNvbnNvbGUubG9nKGBVc2luZyBPYnNpZGlhbiB2YXVsdCBwYXRoOiAke3ZhdWx0UGF0aH1gKTtcbiAgICBcbiAgICBpZiAoIXZhdWx0UGF0aCkge1xuICAgICAgY29uc29sZS5lcnJvcignT2JzaWRpYW4gVmF1bHQgcGF0aCBpcyBub3QgY29uZmlndXJlZCcpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ09ic2lkaWFuIFZhdWx0IOqyveuhnOqwgCDshKTsoJXrkJjsp4Ag7JWK7JWY7Iq164uI64ukLicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyDqs6DsnKAgSUQg7IOd7ISxXG4gICAgICBjb25zdCBpZCA9IGNvbnZlcnNhdGlvbi5pZCB8fCBgJHtEYXRlLm5vdygpfS0ke3V1aWR2NCgpLnN1YnN0cmluZygwLCA4KX1gO1xuICAgICAgXG4gICAgICAvLyDtjIzsnbzrqoUg7IOd7ISxICjsoJzrqqnsnYQg7YyM7J2866qF7Jy866GcIOuzgO2ZmClcbiAgICAgIGNvbnN0IGZpbGVOYW1lID0gY29udmVyc2F0aW9uLnRpdGxlXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgIC5yZXBsYWNlKC9bXmEtejAtOeqwgC3tnqNdL2csICctJylcbiAgICAgICAgLnJlcGxhY2UoLy0rL2csICctJylcbiAgICAgICAgLnJlcGxhY2UoL14tfC0kL2csICcnKVxuICAgICAgICAuc3Vic3RyaW5nKDAsIDEwMCkgLy8g6ri47J20IOygnO2VnFxuICAgICAgICArICcubWQnO1xuICAgICAgXG4gICAgICAvLyDsmLXsi5zrlJTslrggQ2hhdEdQVCDtj7TrjZQg6rK966GcXG4gICAgICBjb25zdCBvYnNpZGlhbkZvbGRlciA9IHBhdGguam9pbih2YXVsdFBhdGgsICdDaGF0R1BUJyk7XG4gICAgICBcbiAgICAgIC8vIO2PtOuNlCDsg53shLEgKOyXhuuKlCDqsr3smrApXG4gICAgICBhd2FpdCBmcy5ta2RpcihvYnNpZGlhbkZvbGRlciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICBcbiAgICAgIC8vIFlBTUwg7ZSE66Gg7Yq466ek7YSwIOyDneyEsVxuICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBgLS0tXG50aXRsZTogJHtjb252ZXJzYXRpb24udGl0bGV9XG5kYXRlOiAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoJ2tvLUtSJyl9XG5zb3VyY2U6ICR7dXJsfVxudGFnczogJHtjb252ZXJzYXRpb24ubWV0YWRhdGE/Lm1vZGVsIHx8ICdDaGF0R1BUJ31cbi0tLVxuXG5gO1xuICAgICAgXG4gICAgICAvLyDrjIDtmZQg64K07Jqp7J2EIOuniO2BrOuLpOyatOycvOuhnCDrs4DtmZhcbiAgICAgIGxldCBtYXJrZG93bkNvbnRlbnQgPSBmcm9udG1hdHRlcjtcbiAgICAgIFxuICAgICAgLy8g64yA7ZmUIOuCtOyaqSDstpTqsIBcbiAgICAgIG1hcmtkb3duQ29udGVudCArPSBgIyAke2NvbnZlcnNhdGlvbi50aXRsZX1cXG5cXG5gO1xuICAgICAgXG4gICAgICAvLyBVUkzqs7wg64Kg7KecIOygleuztCDstpTqsIBcbiAgICAgIG1hcmtkb3duQ29udGVudCArPSBgPiBb7JuQ67O4IFVSTF0oJHt1cmx9KVxcblxcbmA7XG4gICAgICBtYXJrZG93bkNvbnRlbnQgKz0gYD4g7KCA7J6lIOyLnOqwhDogJHtuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCdrby1LUicpfVxcblxcbmA7XG4gICAgICBcbiAgICAgIGlmIChjb252ZXJzYXRpb24ubWV0YWRhdGE/Lm1vZGVsKSB7XG4gICAgICAgIG1hcmtkb3duQ29udGVudCArPSBgPiDtg5zqt7g6ICR7Y29udmVyc2F0aW9uLm1ldGFkYXRhLm1vZGVsfVxcblxcbmA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIG1hcmtkb3duQ29udGVudCArPSBgLS0tXFxuXFxuYDtcbiAgICAgIFxuICAgICAgLy8g7IKs7Jqp7J6QLeyWtOyLnOyKpO2EtO2KuCDrjIDtmZQg64K07Jqp7J2EIOuniO2BrOuLpOyatOycvOuhnCDtj6zrp7ftjIUgKEpTT04g7Iqk7YOA7J2866GcIOuzgOqyvSlcbiAgICAgIGNvbnZlcnNhdGlvbi5tZXNzYWdlcy5mb3JFYWNoKChtZXNzYWdlLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBpc1VzZXIgPSBtZXNzYWdlLnJvbGUgPT09ICd1c2VyJztcbiAgICAgICAgY29uc3QgbWVzc2FnZUhlYWRlciA9IGlzVXNlciA/ICcjIyDwn5GkIOyCrOyaqeyekCcgOiAnIyMg8J+kliBhc3Npc3RhbnQnO1xuICAgICAgICBcbiAgICAgICAgLy8gSlNPTiDtmJXsi53sspjrn7wg7Jet7ZWg6rO8IOuCtOyaqeydhCDqtazrtoTtlZjsl6wg7ZGc7IucXG4gICAgICAgIG1hcmtkb3duQ29udGVudCArPSBgJHttZXNzYWdlSGVhZGVyfVxcblxcbiR7bWVzc2FnZS5jb250ZW50fVxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICAvLyDrp4jsp4Drp4kg66mU7Iuc7KeA6rCAIOyVhOuLiOuptCDqtazrtoTshKAg7LaU6rCAXG4gICAgICAgIGlmIChpbmRleCA8IGNvbnZlcnNhdGlvbi5tZXNzYWdlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgbWFya2Rvd25Db250ZW50ICs9IGAtLS1cXG5cXG5gO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8g7Ji17Iuc65SU7Ja47JeQIOuniO2BrOuLpOyatCDtjIzsnbwg7KCA7J6lXG4gICAgICBjb25zdCBvYnNpZGlhbkZpbGVQYXRoID0gcGF0aC5qb2luKG9ic2lkaWFuRm9sZGVyLCBmaWxlTmFtZSk7XG4gICAgICBhd2FpdCBmcy53cml0ZUZpbGUob2JzaWRpYW5GaWxlUGF0aCwgbWFya2Rvd25Db250ZW50LCAndXRmLTgnKTtcbiAgICAgIGNvbnNvbGUubG9nKGBTYXZlZCBtYXJrZG93biBjb250ZW50IHRvOiAke29ic2lkaWFuRmlsZVBhdGh9YCk7XG4gICAgICBcbiAgICAgIC8vIOybkOuzuCDthY3siqTtirgg64K07JqpIOyggOyepSAoSFRNTCDrjIDsi6ApXG4gICAgICBjb25zdCB0ZXh0RmlsZU5hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKCcubWQnLCAnLW9yaWdpbmFsLnR4dCcpO1xuICAgICAgY29uc3QgdGV4dEZpbGVQYXRoID0gcGF0aC5qb2luKG9ic2lkaWFuRm9sZGVyLCB0ZXh0RmlsZU5hbWUpO1xuICAgICAgYXdhaXQgZnMud3JpdGVGaWxlKHRleHRGaWxlUGF0aCwgcmF3VGV4dCwgJ3V0Zi04Jyk7XG4gICAgICBjb25zb2xlLmxvZyhgU2F2ZWQgb3JpZ2luYWwgdGV4dCBjb250ZW50IHRvOiAke3RleHRGaWxlUGF0aH1gKTtcbiAgICAgIFxuICAgICAgLy8g66Gc7LusIEpTT04g7YyM7J2866GcIOyggOyepSAo64yA7ZmUIOuNsOydtO2EsOunjClcbiAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbnNEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2NvbnZlcnNhdGlvbnMnKTtcbiAgICAgIFxuICAgICAgLy8g7Y+0642UIOyDneyEsSAo7JeG64qUIOqyveyasClcbiAgICAgIGF3YWl0IGZzLm1rZGlyKGNvbnZlcnNhdGlvbnNEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgICAgXG4gICAgICAvLyDrjIDtmZQg642w7J207YSwIOyDneyEsSAoY29udmVyc2F0aW9ucyDtj7TrjZTsl5Ag7KCA7J6l65CY64qUIO2YleyLnSlcbiAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkRhdGEgPSB7XG4gICAgICAgIGlkLFxuICAgICAgICB0aXRsZTogY29udmVyc2F0aW9uLnRpdGxlLFxuICAgICAgICBjb250ZW50OiBjb252ZXJzYXRpb24ubWVzc2FnZXMsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIG1vZGVsOiBjb252ZXJzYXRpb24ubWV0YWRhdGE/Lm1vZGVsIHx8ICdncHQtNCcsXG4gICAgICAgICAgdGFnczogW11cbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHVybFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8gSlNPTiDtjIzsnbzroZwg7KCA7J6lXG4gICAgICBjb25zdCBqc29uRmlsZVBhdGggPSBwYXRoLmpvaW4oY29udmVyc2F0aW9uc0RpciwgYCR7aWR9Lmpzb25gKTtcbiAgICAgIGF3YWl0IGZzLndyaXRlRmlsZShqc29uRmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KGNvbnZlcnNhdGlvbkRhdGEsIG51bGwsIDIpLCAndXRmLTgnKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYFNhdmVkIGNvbnZlcnNhdGlvbiBkYXRhIHRvOiAke2pzb25GaWxlUGF0aH1gKTtcbiAgICAgIFxuICAgICAgLy8g7ISx6rO1IOydkeuLtVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGNvbnZlcnNhdGlvbjogY29udmVyc2F0aW9uRGF0YSxcbiAgICAgICAgICBvYnNpZGlhbjoge1xuICAgICAgICAgICAgcGF0aDogdmF1bHRQYXRoLFxuICAgICAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgICAgICBmaWxlUGF0aDogb2JzaWRpYW5GaWxlUGF0aCxcbiAgICAgICAgICAgIHRleHRQYXRoOiB0ZXh0RmlsZVBhdGgsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogXCJtYXJrZG93bi1mb3JtYXR0ZWRcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAganNvbkJhY2t1cDoganNvbkZpbGVQYXRoXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChzYXZlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBkYXRhOicsIHNhdmVFcnJvcik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICAgIGVycm9yOiBzYXZlRXJyb3IgaW5zdGFuY2VvZiBFcnJvciBcbiAgICAgICAgICAgID8gc2F2ZUVycm9yLm1lc3NhZ2UgXG4gICAgICAgICAgICA6ICfrjbDsnbTthLAg7KCA7J6lIOykkSDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLicgXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBjb252ZXJzYXRpb246JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ+uMgO2ZlCDsspjrpqwg7KSRIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QuJyBcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogQ2hhdEdQVCBVUkwg7Jyg7Zqo7ISxIOqygOyCrFxuICovXG5mdW5jdGlvbiBpc1ZhbGlkQ2hhdEdQVFVybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICB0cnkge1xuICAgIGNvbnN0IHBhcnNlZCA9IG5ldyBVUkwodXJsKTtcbiAgICBcbiAgICAvLyDrj4TrqZTsnbgg7LK07YGsXG4gICAgY29uc3QgdmFsaWREb21haW5zID0gWydjaGF0Lm9wZW5haS5jb20nLCAnY2hhdGdwdC5jb20nXTtcbiAgICBpZiAoIXZhbGlkRG9tYWlucy5zb21lKGRvbWFpbiA9PiBwYXJzZWQuaG9zdG5hbWUuaW5jbHVkZXMoZG9tYWluKSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLy8g6rK966GcIOyytO2BrFxuICAgIHJldHVybiBwYXJzZWQucGF0aG5hbWUuaW5jbHVkZXMoJy9zaGFyZS8nKSB8fCBwYXJzZWQucGF0aG5hbWUuaW5jbHVkZXMoJy9jLycpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJwYXJzZUNoYXRHUFRMaW5rIiwiZnMiLCJwYXRoIiwidjQiLCJ1dWlkdjQiLCJQT1NUIiwicmVxdWVzdCIsImNvbnNvbGUiLCJsb2ciLCJib2R5IiwianNvbiIsImNhdGNoIiwiZSIsImVycm9yIiwidXJsIiwic3VjY2VzcyIsInN0YXR1cyIsImlzVmFsaWRDaGF0R1BUVXJsIiwicmVzdWx0IiwiY29udmVyc2F0aW9uIiwidGl0bGUiLCJtZXNzYWdlcyIsImxlbmd0aCIsInJhd0h0bWwiLCJFcnJvciIsIm1lc3NhZ2UiLCJyYXdUZXh0IiwiZm9yRWFjaCIsIm1zZyIsImlkeCIsInJvbGUiLCJjb250ZW50Iiwic3Vic3RyaW5nIiwidmF1bHRQYXRoIiwicHJvY2VzcyIsImVudiIsIk9CU0lESUFOX1ZBVUxUX1BBVEgiLCJpZCIsIkRhdGUiLCJub3ciLCJmaWxlTmFtZSIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsIm9ic2lkaWFuRm9sZGVyIiwiam9pbiIsIm1rZGlyIiwicmVjdXJzaXZlIiwiZnJvbnRtYXR0ZXIiLCJ0b0xvY2FsZVN0cmluZyIsIm1ldGFkYXRhIiwibW9kZWwiLCJtYXJrZG93bkNvbnRlbnQiLCJpbmRleCIsImlzVXNlciIsIm1lc3NhZ2VIZWFkZXIiLCJvYnNpZGlhbkZpbGVQYXRoIiwid3JpdGVGaWxlIiwidGV4dEZpbGVOYW1lIiwidGV4dEZpbGVQYXRoIiwiY29udmVyc2F0aW9uc0RpciIsImN3ZCIsImNvbnZlcnNhdGlvbkRhdGEiLCJkYXRlIiwidG9JU09TdHJpbmciLCJ0YWdzIiwiY3JlYXRlZEF0IiwianNvbkZpbGVQYXRoIiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJvYnNpZGlhbiIsImZpbGVQYXRoIiwidGV4dFBhdGgiLCJjb250ZW50VHlwZSIsImpzb25CYWNrdXAiLCJzYXZlRXJyb3IiLCJwYXJzZWQiLCJVUkwiLCJ2YWxpZERvbWFpbnMiLCJzb21lIiwiZG9tYWluIiwiaG9zdG5hbWUiLCJpbmNsdWRlcyIsInBhdGhuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/conversations/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/utils/chatgpt.ts":
/*!**********************************!*\
  !*** ./src/lib/utils/chatgpt.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseChatGPTLink: () => (/* binding */ parseChatGPTLink)\n/* harmony export */ });\n/* harmony import */ var playwright__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! playwright */ \"playwright\");\n/* harmony import */ var playwright__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(playwright__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/types */ \"(rsc)/./src/types.ts\");\n\n\n/**\n * 주어진 ChatGPT 대화 URL에서 대화 내용과 전체 페이지 내용을 스크래핑하는 함수\n */ async function parseChatGPTLink(url) {\n    console.log(`Scraping ChatGPT conversation from URL: ${url}`);\n    let browser = null;\n    try {\n        // Chromium 브라우저 시작 (headless 모드)\n        browser = await playwright__WEBPACK_IMPORTED_MODULE_0__.chromium.launch({\n            headless: true,\n            args: [\n                \"--disable-web-security\",\n                \"--disable-features=IsolateOrigins,site-per-process\",\n                \"--no-sandbox\"\n            ],\n            timeout: 60000\n        });\n        // 브라우저 컨텍스트 및 페이지 생성\n        const context = await browser.newContext({\n            userAgent: \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\",\n            viewport: {\n                width: 1280,\n                height: 800\n            },\n            ignoreHTTPSErrors: true\n        });\n        const page = await context.newPage();\n        // 페이지 로드 시도 (여러 번 시도)\n        let maxRetries = 3;\n        let loaded = false;\n        for(let attempt = 1; attempt <= maxRetries; attempt++){\n            try {\n                console.log(`Loading page attempt ${attempt}/${maxRetries}...`);\n                // 모든 리소스를 로드하도록 설정\n                await page.goto(url, {\n                    timeout: 30000,\n                    waitUntil: \"networkidle\" // 모든 리소스가 로드될 때까지 대기\n                });\n                loaded = true;\n                break;\n            } catch (navigationError) {\n                console.error(`Navigation error on attempt ${attempt}:`, navigationError);\n                // 마지막 시도가 아니면 잠시 대기 후 재시도\n                if (attempt < maxRetries) {\n                    await new Promise((resolve)=>setTimeout(resolve, 2000));\n                } else {\n                    throw new Error(`페이지 로드에 실패했습니다: ${navigationError instanceof Error ? navigationError.message : String(navigationError)}`);\n                }\n            }\n        }\n        if (!loaded) {\n            throw new Error(\"페이지 로드에 실패했습니다.\");\n        }\n        console.log(\"Page loaded successfully.\");\n        // 로그인 필요 여부 검사\n        if (url.includes(\"/share/\")) {\n            console.log(\"Shared URL detected, skipping login check\");\n        } else {\n            const isActualLoginPage = await page.evaluate(()=>{\n                return window.location.href.includes(\"/login\") || window.location.href.includes(\"auth0.openai.com\") || window.location.pathname === \"/auth/login\";\n            });\n            if (isActualLoginPage) {\n                console.log(\"Login page detected.\");\n                throw new Error(\"로그인이 필요한 페이지입니다. ChatGPT에 로그인 후 다시 시도해주세요.\");\n            }\n        }\n        // 페이지 내용이 충분히 로드될 때까지 추가 대기\n        await page.waitForTimeout(3000);\n        // 스크린샷 캡처 (디버깅용)\n        await page.screenshot({\n            path: \"chatgpt-capture.png\"\n        });\n        console.log(\"Screenshot saved to chatgpt-capture.png\");\n        // 전체 페이지 HTML 가져오기 - 모든 구조 그대로 유지\n        const rawHtml = await page.content();\n        // 페이지 텍스트 콘텐츠 가져오기\n        const rawText = await page.evaluate(()=>document.body.innerText);\n        // 대화 내용 추출 (메시지 구조화)\n        console.log(\"Extracting conversation data...\");\n        const conversationData = await extractConversationData(page);\n        // 대화 객체 생성\n        const conversation = {\n            id: extractConversationId(url),\n            title: conversationData.title,\n            messages: conversationData.messages,\n            createdAt: new Date().toISOString(),\n            source: _types__WEBPACK_IMPORTED_MODULE_1__.ChatSource.CHATGPT,\n            metadata: conversationData.metadata\n        };\n        // 빈 대화인지 확인\n        if (conversation.messages.length === 0) {\n            throw new Error(\"대화 내용을 추출할 수 없습니다.\");\n        }\n        console.log(`Extracted conversation: \"${conversation.title}\" with ${conversation.messages.length} messages`);\n        return {\n            conversation,\n            rawHtml,\n            rawText\n        };\n    } catch (error) {\n        console.error(\"Error during conversation extraction:\", error);\n        throw error instanceof Error ? error : new Error(`대화 추출 중 오류 발생: ${String(error)}`);\n    } finally{\n        // 브라우저 종료 - 리소스 정리\n        if (browser) {\n            await browser.close();\n            console.log(\"Browser closed.\");\n        }\n    }\n}\n/**\n * URL에서 대화 ID를 추출하는 헬퍼 함수\n */ function extractConversationId(url) {\n    const urlSegments = url.split(\"/\");\n    const potentialId = urlSegments.pop() || \"\";\n    // ID가 유효한지 확인 (공유 URL의 ID 형식은 다를 수 있음)\n    if (potentialId && potentialId.length > 5) {\n        return potentialId;\n    }\n    // 대체 ID 생성\n    return `${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n}\n/**\n * 페이지에서 대화 데이터를 추출하는 함수\n */ async function extractConversationData(page) {\n    return await page.evaluate(()=>{\n        console.log(\"Starting conversation extraction...\");\n        // 제목 추출 (여러 방법 시도)\n        let title = \"\";\n        // 1. h1 태그에서 제목 찾기\n        const h1Element = document.querySelector(\"h1\");\n        if (h1Element && h1Element.textContent) {\n            title = h1Element.textContent.trim();\n        }\n        // 2. 페이지 타이틀에서 제목 찾기\n        if (!title) {\n            const titleElement = document.querySelector(\"title\");\n            if (titleElement && titleElement.textContent) {\n                title = titleElement.textContent.replace(\" - ChatGPT\", \"\").replace(\" - OpenAI\", \"\").trim();\n            }\n        }\n        // 3. 메타 데이터에서 제목 찾기\n        if (!title) {\n            const metaTitle = document.querySelector('meta[property=\"og:title\"]');\n            if (metaTitle) {\n                const content = metaTitle.getAttribute(\"content\");\n                if (content) {\n                    title = content.trim();\n                }\n            }\n        }\n        // 제목을 찾지 못한 경우 기본값 사용\n        if (!title) {\n            title = \"ChatGPT Conversation \" + new Date().toLocaleString();\n        }\n        console.log(`Title extracted: ${title}`);\n        // 페이지 전체에서 모든 대화 요소 직접 추출 시도\n        // 1. assistant 메시지 찾기\n        const assistantElements = document.querySelectorAll('[data-message-author-role=\"assistant\"]');\n        console.log(`[DEBUG] Found ${assistantElements.length} assistant elements by attribute`);\n        // 2. user 메시지 찾기 (여러 방법 시도)\n        // 명시적인 user 역할 속성 찾기\n        const userByAttrElements = document.querySelectorAll('[data-message-author-role=\"user\"]');\n        console.log(`[DEBUG] Found ${userByAttrElements.length} user elements by attribute`);\n        // 대안: 특정 클래스와 위치로 user 메시지 추론\n        let userElements = [];\n        // 대화 메시지를 저장할 배열\n        let messages = [];\n        if (userByAttrElements.length === 0) {\n            // 여러 가능한 사용자 메시지 컨테이너 선택자 시도\n            for (const selector of [\n                \".whitespace-pre-wrap:not([data-message-author-role])\",\n                \".text-message:not([data-message-author-role])\",\n                '.chat-message[role=\"user\"]',\n                \".chat-message-user\",\n                \".message-user\",\n                \".human-message\"\n            ]){\n                const candidates = document.querySelectorAll(selector);\n                console.log(`[DEBUG] Found ${candidates.length} potential user elements with selector: ${selector}`);\n                if (candidates.length > 0) {\n                    userElements = Array.from(candidates);\n                    break;\n                }\n            }\n        } else {\n            userElements = Array.from(userByAttrElements);\n        }\n        console.log(`[DEBUG] Total user elements: ${userElements.length}`);\n        // 대화 수집\n        if (assistantElements.length > 0 && userElements.length > 0) {\n            // HTML 구조에서 모든 대화 요소 수집 및 순서 결정\n            const conversationElements = [];\n            // 어시스턴트 메시지 추가\n            Array.from(assistantElements).forEach((el)=>{\n                conversationElements.push({\n                    element: el,\n                    role: \"assistant\",\n                    position: getPositionInDocument(el)\n                });\n            });\n            // 사용자 메시지 추가\n            userElements.forEach((el)=>{\n                conversationElements.push({\n                    element: el,\n                    role: \"user\",\n                    position: getPositionInDocument(el)\n                });\n            });\n            // DOM 순서대로 정렬\n            conversationElements.sort((a, b)=>a.position - b.position);\n            console.log(`[DEBUG] Sorted conversation elements: ${conversationElements.length}`);\n            console.log(`[DEBUG] First few roles: ${conversationElements.slice(0, 3).map((e)=>e.role).join(\", \")}`);\n            // 정렬된 요소에서 대화 내용 추출\n            const extractedMessages = [];\n            for (const item of conversationElements){\n                const content = item.element.textContent?.trim() || \"\";\n                if (content && content.length > 0) {\n                    // 일부 UI 요소 제외\n                    if (!content.includes(\"Skip to content\") && !content.includes(\"Log in\") && !content.includes(\"Sign up\")) {\n                        extractedMessages.push({\n                            role: item.role,\n                            content\n                        });\n                    }\n                }\n            }\n            console.log(`[DEBUG] Extracted ${extractedMessages.length} messages`);\n            if (extractedMessages.length > 0) {\n                console.log(`[DEBUG] First message role: ${extractedMessages[0].role}`);\n                console.log(`[DEBUG] First message preview: ${extractedMessages[0].content.substring(0, 30)}...`);\n            }\n            // 최소한 하나의 사용자와 어시스턴트 메시지가 있는지 확인\n            const hasUser = extractedMessages.some((m)=>m.role === \"user\");\n            const hasAssistant = extractedMessages.some((m)=>m.role === \"assistant\");\n            if (hasUser && hasAssistant && extractedMessages.length >= 2) {\n                console.log(`[DEBUG] Found valid conversation with ${extractedMessages.length} messages`);\n                messages = extractedMessages;\n            } else {\n                console.log(`[DEBUG] Extracted messages don't form a valid conversation (user: ${hasUser}, assistant: ${hasAssistant})`);\n            }\n        }\n        // 페이지에서 요소의 위치를 결정하는 함수\n        function getPositionInDocument(element) {\n            // 요소의 부모들을 모두 찾아서 깊이 계산\n            let depth = 0;\n            let parent = element.parentElement;\n            while(parent){\n                depth++;\n                parent = parent.parentElement;\n            }\n            // DOM에서의 순서를 계산 (형제 요소 중 위치)\n            let siblingPosition = 0;\n            let sibling = element.previousElementSibling;\n            while(sibling){\n                siblingPosition++;\n                sibling = sibling.previousElementSibling;\n            }\n            // 요소의 대략적인 Y 위치를 반환 (if available)\n            const rect = element.getBoundingClientRect();\n            const yPosition = rect ? rect.top : 0;\n            // 깊이, 형제 위치, Y위치를 조합하여 최종 위치 반환\n            return yPosition + siblingPosition * 10000 + depth * 1000000;\n        }\n        // 메시지가 없으면 기본 오류 메시지 추가\n        if (messages.length === 0) {\n            // 최후의 방법: 페이지에서 이전/다음 메시지 패턴 찾기\n            try {\n                // 일반적인 사용자 입력 패턴 (최소 3개 이상의 단어를 가진 문단)\n                const potentialUserMessages = Array.from(document.querySelectorAll(\"p, div, span\")).map((el)=>el.textContent?.trim() || \"\").filter((text)=>text && text.split(\" \").length >= 3 && text.length > 20).filter((text)=>!text.includes(\"ChatGPT\") && !text.includes(\"Log in\") && !text.includes(\"Sign up\"));\n                if (potentialUserMessages.length > 0) {\n                    // 첫 번째 메시지를 사용자 메시지로 추가\n                    const userMessage = potentialUserMessages[0];\n                    messages.push({\n                        role: \"user\",\n                        content: userMessage\n                    });\n                    // 나머지 텍스트를 어시스턴트 응답으로 추가\n                    const remainingText = document.body.innerText.replace(title, \"\").replace(userMessage, \"\").replace(/Log in|Sign up|Attach|Search|Reason|Voice|By messaging ChatGPT|Skip to content|ChatGPT/g, \"\").replace(/window\\.__oai_.*?;/g, \"\").trim();\n                    if (remainingText.length > 0) {\n                        messages.push({\n                            role: \"assistant\",\n                            content: remainingText\n                        });\n                    }\n                } else {\n                    messages.push({\n                        role: \"assistant\",\n                        content: \"대화 내용을 추출할 수 없습니다. ChatGPT 공유 링크가 유효한지 확인해주세요.\"\n                    });\n                }\n            } catch (error) {\n                messages.push({\n                    role: \"assistant\",\n                    content: \"대화 내용을 추출할 수 없습니다. ChatGPT 공유 링크가 유효한지 확인해주세요.\"\n                });\n            }\n        }\n        // 대화형 구조 확인 - 먼저 유저 메시지로 시작하는지 확인\n        if (messages.length > 0 && messages[0].role !== \"user\") {\n            // ChatGPT 대화는 항상 사용자 질문으로 시작해야 함\n            // 대화가 어시스턴트로 시작하면 첫 메시지를 사용자 메시지로 변경\n            console.log(\"첫 메시지가 사용자 메시지가 아닙니다. 대화 구조를 수정합니다.\");\n            // 새 대화 구조 생성\n            const alternatingMessages = [];\n            // 첫 번째 메시지가 assistant인 경우, 가짜 user 메시지를 추가하고 시작\n            alternatingMessages.push({\n                role: \"user\",\n                content: \"대화를 시작합니다.\"\n            });\n            // 기존 메시지 복사\n            messages.forEach((msg)=>{\n                alternatingMessages.push(msg);\n            });\n            // 수정된 메시지로 교체\n            messages = alternatingMessages;\n        }\n        // 올바른 대화 구조 확인 (user와 assistant가 번갈아 나타나야 함)\n        const correctedMessages = [];\n        let expectedRole = \"user\"; // 대화는 user로 시작해야 함\n        messages.forEach((msg, index)=>{\n            if (index === 0 && msg.role !== \"user\") {\n                // 첫 메시지는 항상 사용자여야 함\n                correctedMessages.push({\n                    role: \"user\",\n                    content: \"대화를 시작합니다.\"\n                });\n                expectedRole = \"assistant\";\n            }\n            if (msg.role === expectedRole) {\n                // 역할이 예상대로인 경우 그대로 추가\n                correctedMessages.push(msg);\n                // 다음 예상 역할 전환\n                expectedRole = expectedRole === \"user\" ? \"assistant\" : \"user\";\n            } else {\n                // 같은 역할이 연속으로 나타나는 경우, 빈 메시지를 중간에 삽입\n                if (expectedRole === \"user\") {\n                    correctedMessages.push({\n                        role: \"user\",\n                        content: \"(계속)\"\n                    });\n                } else {\n                    correctedMessages.push({\n                        role: \"assistant\",\n                        content: \"(계속)\"\n                    });\n                }\n                // 현재 메시지 추가\n                correctedMessages.push(msg);\n                // 다음 예상 역할 설정\n                expectedRole = msg.role === \"user\" ? \"assistant\" : \"user\";\n            }\n        });\n        // 수정된 메시지로 교체\n        messages = correctedMessages;\n        // GPT-4 모델인지 확인\n        const isGPT4 = document.body.innerText.includes(\"GPT-4\") || document.body.innerText.includes(\"gpt-4\") || document.querySelector('img[alt*=\"GPT-4\"]') !== null;\n        return {\n            title,\n            messages,\n            metadata: {\n                date: new Date().toISOString(),\n                model: isGPT4 ? \"gpt-4\" : \"gpt-3.5-turbo\",\n                tags: []\n            }\n        };\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDckMsSUFBSUEsaUJBQWlCLFFBQVE7b0JBQzNCRCxrQkFBa0JuQyxJQUFJLENBQUM7d0JBQ3JCRSxNQUFNO3dCQUNObkQsU0FBUztvQkFDWDtnQkFDRixPQUFPO29CQUNMb0Ysa0JBQWtCbkMsSUFBSSxDQUFDO3dCQUNyQkUsTUFBTTt3QkFDTm5ELFNBQVM7b0JBQ1g7Z0JBQ0Y7Z0JBQ0EsWUFBWTtnQkFDWm9GLGtCQUFrQm5DLElBQUksQ0FBQ2tDO2dCQUN2QixjQUFjO2dCQUNkRSxlQUFlRixJQUFJaEMsSUFBSSxLQUFLLFNBQVMsY0FBYztZQUNyRDtRQUNGO1FBRUEsY0FBYztRQUNkeEMsV0FBV3lFO1FBRVgsZ0JBQWdCO1FBQ2hCLE1BQU1HLFNBQVNyRixTQUFTQyxJQUFJLENBQUNDLFNBQVMsQ0FBQ2YsUUFBUSxDQUFDLFlBQ25DYSxTQUFTQyxJQUFJLENBQUNDLFNBQVMsQ0FBQ2YsUUFBUSxDQUFDLFlBQ2pDYSxTQUFTNEIsYUFBYSxDQUFDLHlCQUF5QjtRQUU3RCxPQUFPO1lBQ0xwQjtZQUNBQztZQUNBTSxVQUFVO2dCQUNSdUUsTUFBTSxJQUFJM0UsT0FBT0MsV0FBVztnQkFDNUIyRSxPQUFPRixTQUFTLFVBQVU7Z0JBQzFCRyxNQUFNLEVBQUU7WUFDVjtRQUNGO0lBQ0Y7QUFTRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BrbS1wcm9qZWN0Ly4vc3JjL2xpYi91dGlscy9jaGF0Z3B0LnRzP2RmZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2hyb21pdW0sIEJyb3dzZXIsIFBhZ2UgfSBmcm9tICdwbGF5d3JpZ2h0JztcbmltcG9ydCB7IENvbnZlcnNhdGlvbiwgQ2hhdE1lc3NhZ2UsIENoYXRTb3VyY2UgfSBmcm9tICdAL3R5cGVzJztcblxuLyoqXG4gKiDso7zslrTsp4QgQ2hhdEdQVCDrjIDtmZQgVVJM7JeQ7IScIOuMgO2ZlCDrgrTsmqnqs7wg7KCE7LK0IO2OmOydtOyngCDrgrTsmqnsnYQg7Iqk7YGs656Y7ZWR7ZWY64qUIO2VqOyImFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGFyc2VDaGF0R1BUTGluayh1cmw6IHN0cmluZyk6IFByb21pc2U8eyBcbiAgY29udmVyc2F0aW9uOiBDb252ZXJzYXRpb247IFxuICByYXdIdG1sOiBzdHJpbmc7IFxuICByYXdUZXh0OiBzdHJpbmc7XG59PiB7XG4gIGNvbnNvbGUubG9nKGBTY3JhcGluZyBDaGF0R1BUIGNvbnZlcnNhdGlvbiBmcm9tIFVSTDogJHt1cmx9YCk7XG4gIFxuICBsZXQgYnJvd3NlcjogQnJvd3NlciB8IG51bGwgPSBudWxsO1xuICBcbiAgdHJ5IHtcbiAgICAvLyBDaHJvbWl1bSDruIzrnbzsmrDsoIAg7Iuc7J6RIChoZWFkbGVzcyDrqqjrk5wpXG4gICAgYnJvd3NlciA9IGF3YWl0IGNocm9taXVtLmxhdW5jaCh7XG4gICAgICBoZWFkbGVzczogdHJ1ZSwgIC8vIOuwseq3uOudvOyatOuTnOyXkOyEnCDsi6TtlolcbiAgICAgIGFyZ3M6IFtcbiAgICAgICAgJy0tZGlzYWJsZS13ZWItc2VjdXJpdHknLFxuICAgICAgICAnLS1kaXNhYmxlLWZlYXR1cmVzPUlzb2xhdGVPcmlnaW5zLHNpdGUtcGVyLXByb2Nlc3MnLFxuICAgICAgICAnLS1uby1zYW5kYm94JyxcbiAgICAgIF0sXG4gICAgICB0aW1lb3V0OiA2MDAwMCwgLy8gNjDstIgg7YOA7J6E7JWE7JuDXG4gICAgfSk7XG5cbiAgICAvLyDruIzrnbzsmrDsoIAg7Luo7YWN7Iqk7Yq4IOuwjyDtjpjsnbTsp4Ag7IOd7ISxXG4gICAgY29uc3QgY29udGV4dCA9IGF3YWl0IGJyb3dzZXIubmV3Q29udGV4dCh7XG4gICAgICB1c2VyQWdlbnQ6ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIwLjAuMC4wIFNhZmFyaS81MzcuMzYnLFxuICAgICAgdmlld3BvcnQ6IHsgd2lkdGg6IDEyODAsIGhlaWdodDogODAwIH0sXG4gICAgICBpZ25vcmVIVFRQU0Vycm9yczogdHJ1ZSxcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBwYWdlID0gYXdhaXQgY29udGV4dC5uZXdQYWdlKCk7XG4gICAgXG4gICAgLy8g7Y6Y7J207KeAIOuhnOuTnCDsi5zrj4QgKOyXrOufrCDrsogg7Iuc64+EKVxuICAgIGxldCBtYXhSZXRyaWVzID0gMztcbiAgICBsZXQgbG9hZGVkID0gZmFsc2U7XG4gICAgXG4gICAgZm9yIChsZXQgYXR0ZW1wdCA9IDE7IGF0dGVtcHQgPD0gbWF4UmV0cmllczsgYXR0ZW1wdCsrKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZyhgTG9hZGluZyBwYWdlIGF0dGVtcHQgJHthdHRlbXB0fS8ke21heFJldHJpZXN9Li4uYCk7XG4gICAgICAgIC8vIOuqqOuToCDrpqzshozsiqTrpbwg66Gc65Oc7ZWY64+E66GdIOyEpOyglVxuICAgICAgICBhd2FpdCBwYWdlLmdvdG8odXJsLCB7IFxuICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwLCBcbiAgICAgICAgICB3YWl0VW50aWw6ICduZXR3b3JraWRsZScgLy8g66qo65OgIOumrOyGjOyKpOqwgCDroZzrk5zrkKAg65WM6rmM7KeAIOuMgOq4sFxuICAgICAgICB9KTtcbiAgICAgICAgbG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGNhdGNoIChuYXZpZ2F0aW9uRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgTmF2aWdhdGlvbiBlcnJvciBvbiBhdHRlbXB0ICR7YXR0ZW1wdH06YCwgbmF2aWdhdGlvbkVycm9yKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOuniOyngOuniSDsi5zrj4TqsIAg7JWE64uI66m0IOyeoOyLnCDrjIDquLAg7ZuEIOyerOyLnOuPhFxuICAgICAgICBpZiAoYXR0ZW1wdCA8IG1heFJldHJpZXMpIHtcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwMCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihg7Y6Y7J207KeAIOuhnOuTnOyXkCDsi6TtjKjtlojsirXri4jri6Q6ICR7bmF2aWdhdGlvbkVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBuYXZpZ2F0aW9uRXJyb3IubWVzc2FnZSA6IFN0cmluZyhuYXZpZ2F0aW9uRXJyb3IpfWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFsb2FkZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign7Y6Y7J207KeAIOuhnOuTnOyXkCDsi6TtjKjtlojsirXri4jri6QuJyk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1BhZ2UgbG9hZGVkIHN1Y2Nlc3NmdWxseS4nKTtcbiAgICBcbiAgICAvLyDroZzqt7jsnbgg7ZWE7JqUIOyXrOu2gCDqsoDsgqxcbiAgICBpZiAodXJsLmluY2x1ZGVzKCcvc2hhcmUvJykpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTaGFyZWQgVVJMIGRldGVjdGVkLCBza2lwcGluZyBsb2dpbiBjaGVjaycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpc0FjdHVhbExvZ2luUGFnZSA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4ge1xuICAgICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJy9sb2dpbicpIHx8IFxuICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJ2F1dGgwLm9wZW5haS5jb20nKSB8fFxuICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAnL2F1dGgvbG9naW4nO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChpc0FjdHVhbExvZ2luUGFnZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnTG9naW4gcGFnZSBkZXRlY3RlZC4nKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfroZzqt7jsnbjsnbQg7ZWE7JqU7ZWcIO2OmOydtOyngOyeheuLiOuLpC4gQ2hhdEdQVOyXkCDroZzqt7jsnbgg7ZuEIOuLpOyLnCDsi5zrj4TtlbTso7zshLjsmpQuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g7Y6Y7J207KeAIOuCtOyaqeydtCDstqnrtoTtnogg66Gc65Oc65CgIOuVjOq5jOyngCDstpTqsIAg64yA6riwXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yVGltZW91dCgzMDAwKTtcbiAgICBcbiAgICAvLyDsiqTtgazrprDsg7cg7Lqh7LKYICjrlJTrsoTquYXsmqkpXG4gICAgYXdhaXQgcGFnZS5zY3JlZW5zaG90KHsgcGF0aDogJ2NoYXRncHQtY2FwdHVyZS5wbmcnIH0pO1xuICAgIGNvbnNvbGUubG9nKCdTY3JlZW5zaG90IHNhdmVkIHRvIGNoYXRncHQtY2FwdHVyZS5wbmcnKTtcbiAgICBcbiAgICAvLyDsoITssrQg7Y6Y7J207KeAIEhUTUwg6rCA7KC47Jik6riwIC0g66qo65OgIOq1rOyhsCDqt7jrjIDroZwg7Jyg7KeAXG4gICAgY29uc3QgcmF3SHRtbCA9IGF3YWl0IHBhZ2UuY29udGVudCgpO1xuICAgIFxuICAgIC8vIO2OmOydtOyngCDthY3siqTtirgg7L2Y7YWQ7LigIOqwgOyguOyYpOq4sFxuICAgIGNvbnN0IHJhd1RleHQgPSBhd2FpdCBwYWdlLmV2YWx1YXRlKCgpID0+IGRvY3VtZW50LmJvZHkuaW5uZXJUZXh0KTtcblxuICAgIC8vIOuMgO2ZlCDrgrTsmqkg7LaU7LacICjrqZTsi5zsp4Ag6rWs7KGw7ZmUKVxuICAgIGNvbnNvbGUubG9nKCdFeHRyYWN0aW5nIGNvbnZlcnNhdGlvbiBkYXRhLi4uJyk7XG4gICAgY29uc3QgY29udmVyc2F0aW9uRGF0YSA9IGF3YWl0IGV4dHJhY3RDb252ZXJzYXRpb25EYXRhKHBhZ2UpO1xuXG4gICAgLy8g64yA7ZmUIOqwneyytCDsg53shLFcbiAgICBjb25zdCBjb252ZXJzYXRpb246IENvbnZlcnNhdGlvbiA9IHtcbiAgICAgIGlkOiBleHRyYWN0Q29udmVyc2F0aW9uSWQodXJsKSxcbiAgICAgIHRpdGxlOiBjb252ZXJzYXRpb25EYXRhLnRpdGxlLFxuICAgICAgbWVzc2FnZXM6IGNvbnZlcnNhdGlvbkRhdGEubWVzc2FnZXMgYXMgQ2hhdE1lc3NhZ2VbXSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgc291cmNlOiBDaGF0U291cmNlLkNIQVRHUFQsXG4gICAgICBtZXRhZGF0YTogY29udmVyc2F0aW9uRGF0YS5tZXRhZGF0YVxuICAgIH07XG5cbiAgICAvLyDruYgg64yA7ZmU7J247KeAIO2ZleyduFxuICAgIGlmIChjb252ZXJzYXRpb24ubWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+uMgO2ZlCDrgrTsmqnsnYQg7LaU7Lac7ZWgIOyImCDsl4bsirXri4jri6QuJyk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYEV4dHJhY3RlZCBjb252ZXJzYXRpb246IFwiJHtjb252ZXJzYXRpb24udGl0bGV9XCIgd2l0aCAke2NvbnZlcnNhdGlvbi5tZXNzYWdlcy5sZW5ndGh9IG1lc3NhZ2VzYCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgY29udmVyc2F0aW9uLFxuICAgICAgcmF3SHRtbCxcbiAgICAgIHJhd1RleHRcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyBjb252ZXJzYXRpb24gZXh0cmFjdGlvbjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciBcbiAgICAgID8gZXJyb3IgXG4gICAgICA6IG5ldyBFcnJvcihg64yA7ZmUIOy2lOy2nCDspJEg7Jik66WYIOuwnOyDnTogJHtTdHJpbmcoZXJyb3IpfWApO1xuICB9IGZpbmFsbHkge1xuICAgIC8vIOu4jOudvOyasOyggCDsooXro4wgLSDrpqzshozsiqQg7KCV66asXG4gICAgaWYgKGJyb3dzZXIpIHtcbiAgICAgIGF3YWl0IGJyb3dzZXIuY2xvc2UoKTtcbiAgICAgIGNvbnNvbGUubG9nKCdCcm93c2VyIGNsb3NlZC4nKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBVUkzsl5DshJwg64yA7ZmUIElE66W8IOy2lOy2nO2VmOuKlCDtl6ztjbwg7ZWo7IiYXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RDb252ZXJzYXRpb25JZCh1cmw6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHVybFNlZ21lbnRzID0gdXJsLnNwbGl0KCcvJyk7XG4gIGNvbnN0IHBvdGVudGlhbElkID0gdXJsU2VnbWVudHMucG9wKCkgfHwgJyc7XG4gIFxuICAvLyBJROqwgCDsnKDtmqjtlZzsp4Ag7ZmV7J24ICjqs7XsnKAgVVJM7J2YIElEIO2YleyLneydgCDri6Trpbwg7IiYIOyeiOydjClcbiAgaWYgKHBvdGVudGlhbElkICYmIHBvdGVudGlhbElkLmxlbmd0aCA+IDUpIHtcbiAgICByZXR1cm4gcG90ZW50aWFsSWQ7XG4gIH1cbiAgXG4gIC8vIOuMgOyytCBJRCDsg53shLFcbiAgcmV0dXJuIGAke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDkpfWA7XG59XG5cbi8qKlxuICog7Y6Y7J207KeA7JeQ7IScIOuMgO2ZlCDrjbDsnbTthLDrpbwg7LaU7Lac7ZWY64qUIO2VqOyImFxuICovXG5hc3luYyBmdW5jdGlvbiBleHRyYWN0Q29udmVyc2F0aW9uRGF0YShwYWdlOiBQYWdlKTogUHJvbWlzZTx7IFxuICB0aXRsZTogc3RyaW5nOyBcbiAgbWVzc2FnZXM6IEFycmF5PHsgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcgfCAnc3lzdGVtJzsgY29udGVudDogc3RyaW5nIH0+OyBcbiAgbWV0YWRhdGE6IHsgXG4gICAgZGF0ZTogc3RyaW5nOyBcbiAgICBtb2RlbDogc3RyaW5nOyBcbiAgICB0YWdzOiBzdHJpbmdbXTsgXG4gIH07IFxufT4ge1xuICByZXR1cm4gYXdhaXQgcGFnZS5ldmFsdWF0ZSgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIGNvbnZlcnNhdGlvbiBleHRyYWN0aW9uLi4uJyk7XG4gICAgXG4gICAgLy8g7KCc66qpIOy2lOy2nCAo7Jes65+sIOuwqeuylSDsi5zrj4QpXG4gICAgbGV0IHRpdGxlID0gJyc7XG4gICAgXG4gICAgLy8gMS4gaDEg7YOc6re47JeQ7IScIOygnOuqqSDssL7quLBcbiAgICBjb25zdCBoMUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoMScpO1xuICAgIGlmIChoMUVsZW1lbnQgJiYgaDFFbGVtZW50LnRleHRDb250ZW50KSB7XG4gICAgICB0aXRsZSA9IGgxRWxlbWVudC50ZXh0Q29udGVudC50cmltKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIDIuIO2OmOydtOyngCDtg4DsnbTti4Dsl5DshJwg7KCc66qpIOywvuq4sFxuICAgIGlmICghdGl0bGUpIHtcbiAgICAgIGNvbnN0IHRpdGxlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RpdGxlJyk7XG4gICAgICBpZiAodGl0bGVFbGVtZW50ICYmIHRpdGxlRWxlbWVudC50ZXh0Q29udGVudCkge1xuICAgICAgICB0aXRsZSA9IHRpdGxlRWxlbWVudC50ZXh0Q29udGVudFxuICAgICAgICAgIC5yZXBsYWNlKCcgLSBDaGF0R1BUJywgJycpXG4gICAgICAgICAgLnJlcGxhY2UoJyAtIE9wZW5BSScsICcnKVxuICAgICAgICAgIC50cmltKCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIDMuIOuplO2DgCDrjbDsnbTthLDsl5DshJwg7KCc66qpIOywvuq4sFxuICAgIGlmICghdGl0bGUpIHtcbiAgICAgIGNvbnN0IG1ldGFUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbcHJvcGVydHk9XCJvZzp0aXRsZVwiXScpO1xuICAgICAgaWYgKG1ldGFUaXRsZSkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gbWV0YVRpdGxlLmdldEF0dHJpYnV0ZSgnY29udGVudCcpO1xuICAgICAgICBpZiAoY29udGVudCkge1xuICAgICAgICAgIHRpdGxlID0gY29udGVudC50cmltKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8g7KCc66qp7J2EIOywvuyngCDrqrvtlZwg6rK97JqwIOq4sOuzuOqwkiDsgqzsmqlcbiAgICBpZiAoIXRpdGxlKSB7XG4gICAgICB0aXRsZSA9ICdDaGF0R1BUIENvbnZlcnNhdGlvbiAnICsgbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhgVGl0bGUgZXh0cmFjdGVkOiAke3RpdGxlfWApO1xuICAgIFxuICAgIC8vIO2OmOydtOyngCDsoITssrTsl5DshJwg66qo65OgIOuMgO2ZlCDsmpTshowg7KeB7KCRIOy2lOy2nCDsi5zrj4RcbiAgICAvLyAxLiBhc3Npc3RhbnQg66mU7Iuc7KeAIOywvuq4sFxuICAgIGNvbnN0IGFzc2lzdGFudEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtbWVzc2FnZS1hdXRob3Itcm9sZT1cImFzc2lzdGFudFwiXScpO1xuICAgIGNvbnNvbGUubG9nKGBbREVCVUddIEZvdW5kICR7YXNzaXN0YW50RWxlbWVudHMubGVuZ3RofSBhc3Npc3RhbnQgZWxlbWVudHMgYnkgYXR0cmlidXRlYCk7XG4gICAgXG4gICAgLy8gMi4gdXNlciDrqZTsi5zsp4Ag7LC+6riwICjsl6zrn6wg67Cp67KVIOyLnOuPhClcbiAgICAvLyDrqoXsi5zsoIHsnbggdXNlciDsl63tlaAg7IaN7ISxIOywvuq4sFxuICAgIGNvbnN0IHVzZXJCeUF0dHJFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW1lc3NhZ2UtYXV0aG9yLXJvbGU9XCJ1c2VyXCJdJyk7XG4gICAgY29uc29sZS5sb2coYFtERUJVR10gRm91bmQgJHt1c2VyQnlBdHRyRWxlbWVudHMubGVuZ3RofSB1c2VyIGVsZW1lbnRzIGJ5IGF0dHJpYnV0ZWApO1xuICAgIFxuICAgIC8vIOuMgOyViDog7Yq57KCVIO2BtOuemOyKpOyZgCDsnITsuZjroZwgdXNlciDrqZTsi5zsp4Ag7LaU66GgXG4gICAgbGV0IHVzZXJFbGVtZW50czogRWxlbWVudFtdID0gW107XG4gICAgXG4gICAgLy8g64yA7ZmUIOuplOyLnOyngOulvCDsoIDsnqXtlaAg67Cw7Je0XG4gICAgbGV0IG1lc3NhZ2VzOiBBcnJheTx7IHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnIHwgJ3N5c3RlbSc7IGNvbnRlbnQ6IHN0cmluZyB9PiA9IFtdO1xuICAgIFxuICAgIGlmICh1c2VyQnlBdHRyRWxlbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyDsl6zrn6wg6rCA64ql7ZWcIOyCrOyaqeyekCDrqZTsi5zsp4Ag7Luo7YWM7J2064SIIOyEoO2DneyekCDsi5zrj4RcbiAgICAgIGZvciAoY29uc3Qgc2VsZWN0b3Igb2YgW1xuICAgICAgICAnLndoaXRlc3BhY2UtcHJlLXdyYXA6bm90KFtkYXRhLW1lc3NhZ2UtYXV0aG9yLXJvbGVdKScsIFxuICAgICAgICAnLnRleHQtbWVzc2FnZTpub3QoW2RhdGEtbWVzc2FnZS1hdXRob3Itcm9sZV0pJyxcbiAgICAgICAgJy5jaGF0LW1lc3NhZ2Vbcm9sZT1cInVzZXJcIl0nLFxuICAgICAgICAnLmNoYXQtbWVzc2FnZS11c2VyJyxcbiAgICAgICAgJy5tZXNzYWdlLXVzZXInLFxuICAgICAgICAnLmh1bWFuLW1lc3NhZ2UnXG4gICAgICBdKSB7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgICAgY29uc29sZS5sb2coYFtERUJVR10gRm91bmQgJHtjYW5kaWRhdGVzLmxlbmd0aH0gcG90ZW50aWFsIHVzZXIgZWxlbWVudHMgd2l0aCBzZWxlY3RvcjogJHtzZWxlY3Rvcn1gKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB1c2VyRWxlbWVudHMgPSBBcnJheS5mcm9tKGNhbmRpZGF0ZXMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHVzZXJFbGVtZW50cyA9IEFycmF5LmZyb20odXNlckJ5QXR0ckVsZW1lbnRzKTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coYFtERUJVR10gVG90YWwgdXNlciBlbGVtZW50czogJHt1c2VyRWxlbWVudHMubGVuZ3RofWApO1xuICAgIFxuICAgIC8vIOuMgO2ZlCDsiJjsp5FcbiAgICBpZiAoYXNzaXN0YW50RWxlbWVudHMubGVuZ3RoID4gMCAmJiB1c2VyRWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gSFRNTCDqtazsobDsl5DshJwg66qo65OgIOuMgO2ZlCDsmpTshowg7IiY7KeRIOuwjyDsiJzshJwg6rKw7KCVXG4gICAgICBjb25zdCBjb252ZXJzYXRpb25FbGVtZW50czogQXJyYXk8e1xuICAgICAgICBlbGVtZW50OiBFbGVtZW50O1xuICAgICAgICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JztcbiAgICAgICAgcG9zaXRpb246IG51bWJlcjtcbiAgICAgIH0+ID0gW107XG4gICAgICBcbiAgICAgIC8vIOyWtOyLnOyKpO2EtO2KuCDrqZTsi5zsp4Ag7LaU6rCAXG4gICAgICBBcnJheS5mcm9tKGFzc2lzdGFudEVsZW1lbnRzKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgY29udmVyc2F0aW9uRWxlbWVudHMucHVzaCh7XG4gICAgICAgICAgZWxlbWVudDogZWwsXG4gICAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICAgICAgcG9zaXRpb246IGdldFBvc2l0aW9uSW5Eb2N1bWVudChlbClcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8g7IKs7Jqp7J6QIOuplOyLnOyngCDstpTqsIBcbiAgICAgIHVzZXJFbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgY29udmVyc2F0aW9uRWxlbWVudHMucHVzaCh7XG4gICAgICAgICAgZWxlbWVudDogZWwsXG4gICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgIHBvc2l0aW9uOiBnZXRQb3NpdGlvbkluRG9jdW1lbnQoZWwpXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIERPTSDsiJzshJzrjIDroZwg7KCV66CsXG4gICAgICBjb252ZXJzYXRpb25FbGVtZW50cy5zb3J0KChhLCBiKSA9PiBhLnBvc2l0aW9uIC0gYi5wb3NpdGlvbik7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGBbREVCVUddIFNvcnRlZCBjb252ZXJzYXRpb24gZWxlbWVudHM6ICR7Y29udmVyc2F0aW9uRWxlbWVudHMubGVuZ3RofWApO1xuICAgICAgY29uc29sZS5sb2coYFtERUJVR10gRmlyc3QgZmV3IHJvbGVzOiAke2NvbnZlcnNhdGlvbkVsZW1lbnRzLnNsaWNlKDAsIDMpLm1hcChlID0+IGUucm9sZSkuam9pbignLCAnKX1gKTtcbiAgICAgIFxuICAgICAgLy8g7KCV66Cs65CcIOyalOyGjOyXkOyEnCDrjIDtmZQg64K07JqpIOy2lOy2nFxuICAgICAgY29uc3QgZXh0cmFjdGVkTWVzc2FnZXM6IEFycmF5PHsgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCc7IGNvbnRlbnQ6IHN0cmluZyB9PiA9IFtdO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY29udmVyc2F0aW9uRWxlbWVudHMpIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGl0ZW0uZWxlbWVudC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xuICAgICAgICBpZiAoY29udGVudCAmJiBjb250ZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyDsnbzrtoAgVUkg7JqU7IaMIOygnOyZuFxuICAgICAgICAgIGlmICghY29udGVudC5pbmNsdWRlcygnU2tpcCB0byBjb250ZW50JykgJiYgXG4gICAgICAgICAgICAgICFjb250ZW50LmluY2x1ZGVzKCdMb2cgaW4nKSAmJiBcbiAgICAgICAgICAgICAgIWNvbnRlbnQuaW5jbHVkZXMoJ1NpZ24gdXAnKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHRyYWN0ZWRNZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgICAgcm9sZTogaXRlbS5yb2xlLFxuICAgICAgICAgICAgICBjb250ZW50XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYFtERUJVR10gRXh0cmFjdGVkICR7ZXh0cmFjdGVkTWVzc2FnZXMubGVuZ3RofSBtZXNzYWdlc2ApO1xuICAgICAgaWYgKGV4dHJhY3RlZE1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coYFtERUJVR10gRmlyc3QgbWVzc2FnZSByb2xlOiAke2V4dHJhY3RlZE1lc3NhZ2VzWzBdLnJvbGV9YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbREVCVUddIEZpcnN0IG1lc3NhZ2UgcHJldmlldzogJHtleHRyYWN0ZWRNZXNzYWdlc1swXS5jb250ZW50LnN1YnN0cmluZygwLCAzMCl9Li4uYCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOy1nOyGjO2VnCDtlZjrgpjsnZgg7IKs7Jqp7J6Q7JmAIOyWtOyLnOyKpO2EtO2KuCDrqZTsi5zsp4DqsIAg7J6I64qU7KeAIO2ZleyduFxuICAgICAgY29uc3QgaGFzVXNlciA9IGV4dHJhY3RlZE1lc3NhZ2VzLnNvbWUobSA9PiBtLnJvbGUgPT09ICd1c2VyJyk7XG4gICAgICBjb25zdCBoYXNBc3Npc3RhbnQgPSBleHRyYWN0ZWRNZXNzYWdlcy5zb21lKG0gPT4gbS5yb2xlID09PSAnYXNzaXN0YW50Jyk7XG4gICAgICBcbiAgICAgIGlmIChoYXNVc2VyICYmIGhhc0Fzc2lzdGFudCAmJiBleHRyYWN0ZWRNZXNzYWdlcy5sZW5ndGggPj0gMikge1xuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSBGb3VuZCB2YWxpZCBjb252ZXJzYXRpb24gd2l0aCAke2V4dHJhY3RlZE1lc3NhZ2VzLmxlbmd0aH0gbWVzc2FnZXNgKTtcbiAgICAgICAgbWVzc2FnZXMgPSBleHRyYWN0ZWRNZXNzYWdlcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbREVCVUddIEV4dHJhY3RlZCBtZXNzYWdlcyBkb24ndCBmb3JtIGEgdmFsaWQgY29udmVyc2F0aW9uICh1c2VyOiAke2hhc1VzZXJ9LCBhc3Npc3RhbnQ6ICR7aGFzQXNzaXN0YW50fSlgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8g7Y6Y7J207KeA7JeQ7IScIOyalOyGjOydmCDsnITsuZjrpbwg6rKw7KCV7ZWY64qUIO2VqOyImFxuICAgIGZ1bmN0aW9uIGdldFBvc2l0aW9uSW5Eb2N1bWVudChlbGVtZW50OiBFbGVtZW50KTogbnVtYmVyIHtcbiAgICAgIC8vIOyalOyGjOydmCDrtoDrqqjrk6TsnYQg66qo65GQIOywvuyVhOyEnCDquYrsnbQg6rOE7IKwXG4gICAgICBsZXQgZGVwdGggPSAwO1xuICAgICAgbGV0IHBhcmVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgZGVwdGgrKztcbiAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIERPTeyXkOyEnOydmCDsiJzshJzrpbwg6rOE7IKwICjtmJXsoJwg7JqU7IaMIOykkSDsnITsuZgpXG4gICAgICBsZXQgc2libGluZ1Bvc2l0aW9uID0gMDtcbiAgICAgIGxldCBzaWJsaW5nID0gZWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgd2hpbGUgKHNpYmxpbmcpIHtcbiAgICAgICAgc2libGluZ1Bvc2l0aW9uKys7XG4gICAgICAgIHNpYmxpbmcgPSBzaWJsaW5nLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOyalOyGjOydmCDrjIDrnrXsoIHsnbggWSDsnITsuZjrpbwg67CY7ZmYIChpZiBhdmFpbGFibGUpXG4gICAgICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGNvbnN0IHlQb3NpdGlvbiA9IHJlY3QgPyByZWN0LnRvcCA6IDA7XG4gICAgICBcbiAgICAgIC8vIOq5iuydtCwg7ZiV7KCcIOychOy5mCwgWeychOy5mOulvCDsobDtlantlZjsl6wg7LWc7KKFIOychOy5mCDrsJjtmZhcbiAgICAgIHJldHVybiB5UG9zaXRpb24gKyAoc2libGluZ1Bvc2l0aW9uICogMTAwMDApICsgKGRlcHRoICogMTAwMDAwMCk7XG4gICAgfVxuICAgIFxuICAgIC8vIOuplOyLnOyngOqwgCDsl4bsnLzrqbQg6riw67O4IOyYpOulmCDrqZTsi5zsp4Ag7LaU6rCAXG4gICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8g7LWc7ZuE7J2YIOuwqeuylTog7Y6Y7J207KeA7JeQ7IScIOydtOyghC/ri6TsnYwg66mU7Iuc7KeAIO2MqO2EtCDssL7quLBcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIOydvOuwmOyggeyduCDsgqzsmqnsnpAg7J6F66ClIO2MqO2EtCAo7LWc7IaMIDPqsJwg7J207IOB7J2YIOuLqOyWtOulvCDqsIDsp4Qg66y464uoKVxuICAgICAgICBjb25zdCBwb3RlbnRpYWxVc2VyTWVzc2FnZXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3AsIGRpdiwgc3BhbicpKVxuICAgICAgICAgIC5tYXAoZWwgPT4gZWwudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJylcbiAgICAgICAgICAuZmlsdGVyKHRleHQgPT4gdGV4dCAmJiB0ZXh0LnNwbGl0KCcgJykubGVuZ3RoID49IDMgJiYgdGV4dC5sZW5ndGggPiAyMClcbiAgICAgICAgICAuZmlsdGVyKHRleHQgPT4gIXRleHQuaW5jbHVkZXMoJ0NoYXRHUFQnKSAmJiAhdGV4dC5pbmNsdWRlcygnTG9nIGluJykgJiYgIXRleHQuaW5jbHVkZXMoJ1NpZ24gdXAnKSk7XG4gICAgICAgICAgXG4gICAgICAgIGlmIChwb3RlbnRpYWxVc2VyTWVzc2FnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vIOyyqyDrsojsp7gg66mU7Iuc7KeA66W8IOyCrOyaqeyekCDrqZTsi5zsp4DroZwg7LaU6rCAXG4gICAgICAgICAgY29uc3QgdXNlck1lc3NhZ2UgPSBwb3RlbnRpYWxVc2VyTWVzc2FnZXNbMF07XG4gICAgICAgICAgbWVzc2FnZXMucHVzaCh7XG4gICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICBjb250ZW50OiB1c2VyTWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIOuCmOuouOyngCDthY3siqTtirjrpbwg7Ja07Iuc7Iqk7YS07Yq4IOydkeuLteycvOuhnCDstpTqsIBcbiAgICAgICAgICBjb25zdCByZW1haW5pbmdUZXh0ID0gZG9jdW1lbnQuYm9keS5pbm5lclRleHRcbiAgICAgICAgICAgIC5yZXBsYWNlKHRpdGxlLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHVzZXJNZXNzYWdlLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9Mb2cgaW58U2lnbiB1cHxBdHRhY2h8U2VhcmNofFJlYXNvbnxWb2ljZXxCeSBtZXNzYWdpbmcgQ2hhdEdQVHxTa2lwIHRvIGNvbnRlbnR8Q2hhdEdQVC9nLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC93aW5kb3dcXC5fX29haV8uKj87L2csICcnKVxuICAgICAgICAgICAgLnRyaW0oKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgIGlmIChyZW1haW5pbmdUZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICAgICAgY29udGVudDogcmVtYWluaW5nVGV4dFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1lc3NhZ2VzLnB1c2goeyBcbiAgICAgICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLCBcbiAgICAgICAgICAgIGNvbnRlbnQ6ICfrjIDtmZQg64K07Jqp7J2EIOy2lOy2nO2VoCDsiJgg7JeG7Iq164uI64ukLiBDaGF0R1BUIOqzteycoCDrp4HtgazqsIAg7Jyg7Zqo7ZWc7KeAIO2ZleyduO2VtOyjvOyEuOyalC4nIFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBtZXNzYWdlcy5wdXNoKHsgXG4gICAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsIFxuICAgICAgICAgIGNvbnRlbnQ6ICfrjIDtmZQg64K07Jqp7J2EIOy2lOy2nO2VoCDsiJgg7JeG7Iq164uI64ukLiBDaGF0R1BUIOqzteycoCDrp4HtgazqsIAg7Jyg7Zqo7ZWc7KeAIO2ZleyduO2VtOyjvOyEuOyalC4nIFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8g64yA7ZmU7ZiVIOq1rOyhsCDtmZXsnbggLSDrqLzsoIAg7Jyg7KCAIOuplOyLnOyngOuhnCDsi5zsnpHtlZjripTsp4Ag7ZmV7J24XG4gICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA+IDAgJiYgbWVzc2FnZXNbMF0ucm9sZSAhPT0gJ3VzZXInKSB7XG4gICAgICAvLyBDaGF0R1BUIOuMgO2ZlOuKlCDtla3sg4Eg7IKs7Jqp7J6QIOyniOusuOycvOuhnCDsi5zsnpHtlbTslbwg7ZWoXG4gICAgICAvLyDrjIDtmZTqsIAg7Ja07Iuc7Iqk7YS07Yq466GcIOyLnOyeke2VmOuptCDssqsg66mU7Iuc7KeA66W8IOyCrOyaqeyekCDrqZTsi5zsp4DroZwg67OA6rK9XG4gICAgICBjb25zb2xlLmxvZygn7LKrIOuplOyLnOyngOqwgCDsgqzsmqnsnpAg66mU7Iuc7KeA6rCAIOyVhOuLmeuLiOuLpC4g64yA7ZmUIOq1rOyhsOulvCDsiJjsoJXtlanri4jri6QuJyk7XG4gICAgICBcbiAgICAgIC8vIOyDiCDrjIDtmZQg6rWs7KGwIOyDneyEsVxuICAgICAgY29uc3QgYWx0ZXJuYXRpbmdNZXNzYWdlczogQXJyYXk8eyByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JyB8ICdzeXN0ZW0nOyBjb250ZW50OiBzdHJpbmcgfT4gPSBbXTtcbiAgICAgIFxuICAgICAgLy8g7LKrIOuyiOynuCDrqZTsi5zsp4DqsIAgYXNzaXN0YW507J24IOqyveyasCwg6rCA7KecIHVzZXIg66mU7Iuc7KeA66W8IOy2lOqwgO2VmOqzoCDsi5zsnpFcbiAgICAgIGFsdGVybmF0aW5nTWVzc2FnZXMucHVzaCh7XG4gICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgY29udGVudDogJ+uMgO2ZlOulvCDsi5zsnpHtlanri4jri6QuJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIOq4sOyhtCDrqZTsi5zsp4Ag67O17IKsXG4gICAgICBtZXNzYWdlcy5mb3JFYWNoKG1zZyA9PiB7XG4gICAgICAgIGFsdGVybmF0aW5nTWVzc2FnZXMucHVzaChtc2cpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIOyImOygleuQnCDrqZTsi5zsp4DroZwg6rWQ7LK0XG4gICAgICBtZXNzYWdlcyA9IGFsdGVybmF0aW5nTWVzc2FnZXM7XG4gICAgfVxuICAgIFxuICAgIC8vIOyYrOuwlOuluCDrjIDtmZQg6rWs7KGwIO2ZleyduCAodXNlcuyZgCBhc3Npc3RhbnTqsIAg67KI6rCI7JWEIOuCmO2DgOuCmOyVvCDtlagpXG4gICAgY29uc3QgY29ycmVjdGVkTWVzc2FnZXM6IEFycmF5PHsgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcgfCAnc3lzdGVtJzsgY29udGVudDogc3RyaW5nIH0+ID0gW107XG4gICAgbGV0IGV4cGVjdGVkUm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcgPSAndXNlcic7IC8vIOuMgO2ZlOuKlCB1c2Vy66GcIOyLnOyeke2VtOyVvCDtlahcbiAgICBcbiAgICBtZXNzYWdlcy5mb3JFYWNoKChtc2csIGluZGV4KSA9PiB7XG4gICAgICBpZiAoaW5kZXggPT09IDAgJiYgbXNnLnJvbGUgIT09ICd1c2VyJykge1xuICAgICAgICAvLyDssqsg66mU7Iuc7KeA64qUIO2VreyDgSDsgqzsmqnsnpDsl6zslbwg7ZWoXG4gICAgICAgIGNvcnJlY3RlZE1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICBjb250ZW50OiAn64yA7ZmU66W8IOyLnOyeke2VqeuLiOuLpC4nXG4gICAgICAgIH0pO1xuICAgICAgICBleHBlY3RlZFJvbGUgPSAnYXNzaXN0YW50JztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKG1zZy5yb2xlID09PSBleHBlY3RlZFJvbGUpIHtcbiAgICAgICAgLy8g7Jet7ZWg7J20IOyYiOyDgeuMgOuhnOyduCDqsr3smrAg6re464yA66GcIOy2lOqwgFxuICAgICAgICBjb3JyZWN0ZWRNZXNzYWdlcy5wdXNoKG1zZyk7XG4gICAgICAgIC8vIOuLpOydjCDsmIjsg4Eg7Jet7ZWgIOyghO2ZmFxuICAgICAgICBleHBlY3RlZFJvbGUgPSBleHBlY3RlZFJvbGUgPT09ICd1c2VyJyA/ICdhc3Npc3RhbnQnIDogJ3VzZXInO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g6rCZ7J2AIOyXre2VoOydtCDsl7Dsho3snLzroZwg64KY7YOA64KY64qUIOqyveyasCwg67mIIOuplOyLnOyngOulvCDspJHqsITsl5Ag7IK97J6FXG4gICAgICAgIGlmIChleHBlY3RlZFJvbGUgPT09ICd1c2VyJykge1xuICAgICAgICAgIGNvcnJlY3RlZE1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgY29udGVudDogJyjqs4Tsho0pJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvcnJlY3RlZE1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICAgICAgICBjb250ZW50OiAnKOqzhOyGjSknXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8g7ZiE7J6sIOuplOyLnOyngCDstpTqsIBcbiAgICAgICAgY29ycmVjdGVkTWVzc2FnZXMucHVzaChtc2cpO1xuICAgICAgICAvLyDri6TsnYwg7JiI7IOBIOyXre2VoCDshKTsoJVcbiAgICAgICAgZXhwZWN0ZWRSb2xlID0gbXNnLnJvbGUgPT09ICd1c2VyJyA/ICdhc3Npc3RhbnQnIDogJ3VzZXInO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIOyImOygleuQnCDrqZTsi5zsp4DroZwg6rWQ7LK0XG4gICAgbWVzc2FnZXMgPSBjb3JyZWN0ZWRNZXNzYWdlcztcbiAgICBcbiAgICAvLyBHUFQtNCDrqqjrjbjsnbjsp4Ag7ZmV7J24XG4gICAgY29uc3QgaXNHUFQ0ID0gZG9jdW1lbnQuYm9keS5pbm5lclRleHQuaW5jbHVkZXMoJ0dQVC00JykgfHwgXG4gICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5uZXJUZXh0LmluY2x1ZGVzKCdncHQtNCcpIHx8XG4gICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2ltZ1thbHQqPVwiR1BULTRcIl0nKSAhPT0gbnVsbDtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGUsXG4gICAgICBtZXNzYWdlcyxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgbW9kZWw6IGlzR1BUNCA/ICdncHQtNCcgOiAnZ3B0LTMuNS10dXJibycsXG4gICAgICAgIHRhZ3M6IFtdXG4gICAgICB9XG4gICAgfTtcbiAgfSkgYXMgeyBcbiAgICB0aXRsZTogc3RyaW5nOyBcbiAgICBtZXNzYWdlczogQXJyYXk8eyByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JyB8ICdzeXN0ZW0nOyBjb250ZW50OiBzdHJpbmcgfT47IFxuICAgIG1ldGFkYXRhOiB7IFxuICAgICAgZGF0ZTogc3RyaW5nOyBcbiAgICAgIG1vZGVsOiBzdHJpbmc7IFxuICAgICAgdGFnczogc3RyaW5nW107IFxuICAgIH07IFxuICB9O1xufSJdLCJuYW1lcyI6WyJjaHJvbWl1bSIsIkNoYXRTb3VyY2UiLCJwYXJzZUNoYXRHUFRMaW5rIiwidXJsIiwiY29uc29sZSIsImxvZyIsImJyb3dzZXIiLCJsYXVuY2giLCJoZWFkbGVzcyIsImFyZ3MiLCJ0aW1lb3V0IiwiY29udGV4dCIsIm5ld0NvbnRleHQiLCJ1c2VyQWdlbnQiLCJ2aWV3cG9ydCIsIndpZHRoIiwiaGVpZ2h0IiwiaWdub3JlSFRUUFNFcnJvcnMiLCJwYWdlIiwibmV3UGFnZSIsIm1heFJldHJpZXMiLCJsb2FkZWQiLCJhdHRlbXB0IiwiZ290byIsIndhaXRVbnRpbCIsIm5hdmlnYXRpb25FcnJvciIsImVycm9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiRXJyb3IiLCJtZXNzYWdlIiwiU3RyaW5nIiwiaW5jbHVkZXMiLCJpc0FjdHVhbExvZ2luUGFnZSIsImV2YWx1YXRlIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwicGF0aG5hbWUiLCJ3YWl0Rm9yVGltZW91dCIsInNjcmVlbnNob3QiLCJwYXRoIiwicmF3SHRtbCIsImNvbnRlbnQiLCJyYXdUZXh0IiwiZG9jdW1lbnQiLCJib2R5IiwiaW5uZXJUZXh0IiwiY29udmVyc2F0aW9uRGF0YSIsImV4dHJhY3RDb252ZXJzYXRpb25EYXRhIiwiY29udmVyc2F0aW9uIiwiaWQiLCJleHRyYWN0Q29udmVyc2F0aW9uSWQiLCJ0aXRsZSIsIm1lc3NhZ2VzIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic291cmNlIiwiQ0hBVEdQVCIsIm1ldGFkYXRhIiwibGVuZ3RoIiwiY2xvc2UiLCJ1cmxTZWdtZW50cyIsInNwbGl0IiwicG90ZW50aWFsSWQiLCJwb3AiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJoMUVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJ0cmltIiwidGl0bGVFbGVtZW50IiwicmVwbGFjZSIsIm1ldGFUaXRsZSIsImdldEF0dHJpYnV0ZSIsInRvTG9jYWxlU3RyaW5nIiwiYXNzaXN0YW50RWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwidXNlckJ5QXR0ckVsZW1lbnRzIiwidXNlckVsZW1lbnRzIiwic2VsZWN0b3IiLCJjYW5kaWRhdGVzIiwiQXJyYXkiLCJmcm9tIiwiY29udmVyc2F0aW9uRWxlbWVudHMiLCJmb3JFYWNoIiwiZWwiLCJwdXNoIiwiZWxlbWVudCIsInJvbGUiLCJwb3NpdGlvbiIsImdldFBvc2l0aW9uSW5Eb2N1bWVudCIsInNvcnQiLCJhIiwiYiIsInNsaWNlIiwibWFwIiwiZSIsImpvaW4iLCJleHRyYWN0ZWRNZXNzYWdlcyIsIml0ZW0iLCJoYXNVc2VyIiwic29tZSIsIm0iLCJoYXNBc3Npc3RhbnQiLCJkZXB0aCIsInBhcmVudCIsInBhcmVudEVsZW1lbnQiLCJzaWJsaW5nUG9zaXRpb24iLCJzaWJsaW5nIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ5UG9zaXRpb24iLCJ0b3AiLCJwb3RlbnRpYWxVc2VyTWVzc2FnZXMiLCJmaWx0ZXIiLCJ0ZXh0IiwidXNlck1lc3NhZ2UiLCJyZW1haW5pbmdUZXh0IiwiYWx0ZXJuYXRpbmdNZXNzYWdlcyIsIm1zZyIsImNvcnJlY3RlZE1lc3NhZ2VzIiwiZXhwZWN0ZWRSb2xlIiwiaW5kZXgiLCJpc0dQVDQiLCJkYXRlIiwibW9kZWwiLCJ0YWdzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/utils/chatgpt.ts\n");

/***/ }),

/***/ "(rsc)/./src/types.ts":
/*!**********************!*\
  !*** ./src/types.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatSource: () => (/* binding */ ChatSource)\n/* harmony export */ });\nvar ChatSource;\n(function(ChatSource) {\n    ChatSource[\"CHATGPT\"] = \"chatgpt\";\n    ChatSource[\"USER_INPUT\"] = \"user_input\";\n    ChatSource[\"API\"] = \"api\";\n})(ChatSource || (ChatSource = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdHlwZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7VUFBWUE7Ozs7R0FBQUEsZUFBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wa20tcHJvamVjdC8uL3NyYy90eXBlcy50cz8yNjljIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBlbnVtIENoYXRTb3VyY2Uge1xyXG4gIENIQVRHUFQgPSAnY2hhdGdwdCcsXHJcbiAgVVNFUl9JTlBVVCA9ICd1c2VyX2lucHV0JyxcclxuICBBUEkgPSAnYXBpJyxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDaGF0TWVzc2FnZSB7XHJcbiAgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcgfCAnc3lzdGVtJztcclxuICBjb250ZW50OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29udmVyc2F0aW9uIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgbWVzc2FnZXM6IENoYXRNZXNzYWdlW107XHJcbiAgY3JlYXRlZEF0OiBEYXRlIHwgc3RyaW5nO1xyXG4gIHNvdXJjZTogQ2hhdFNvdXJjZTtcclxuICB0YWdzPzogc3RyaW5nW107XHJcbiAgbWV0YWRhdGE/OiB7XHJcbiAgICBkYXRlOiBzdHJpbmc7XHJcbiAgICBtb2RlbDogc3RyaW5nO1xyXG4gICAgdGFnczogc3RyaW5nW107XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDb252ZXJzYXRpb25TdW1tYXJ5IHtcclxuICBpZDogc3RyaW5nO1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgc3VtbWFyeTogc3RyaW5nO1xyXG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xyXG4gIHNvdXJjZTogQ2hhdFNvdXJjZTtcclxuICB0YWdzPzogc3RyaW5nW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3Mge1xyXG4gIG9ic2lkaWFuVmF1bHRQYXRoOiBzdHJpbmc7XHJcbiAgb3BlbmFpQXBpS2V5OiBzdHJpbmc7XHJcbiAgZGVmYXVsdFRhZ3M6IHN0cmluZ1tdO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBBcGlSZXNwb25zZTxUPiA9IHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGRhdGE/OiBUO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59OyAiXSwibmFtZXMiOlsiQ2hhdFNvdXJjZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/types.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fconversations%2Froute&page=%2Fapi%2Fconversations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconversations%2Froute.ts&appDir=C%3A%5CpmkProject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CpmkProject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();